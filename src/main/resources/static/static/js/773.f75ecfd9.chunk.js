"use strict";(self.webpackChunkserat_frontend=self.webpackChunkserat_frontend||[]).push([[773],{9773:(e,s,t)=>{t.r(s),t.d(s,{default:()=>E});var o=t(5043),i=t(5444),n=t(9372),a=t(6497),r=t(2019),l=t(6051),c=t(6399),d=t(5206),g=t(9073),u=t(7419),h=t(1645),m=t(1005),x=t(2751),A=t(691),f=t(3722),w=t(8168);const j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"};var I=t(2172),y=function(e,s){return o.createElement(I.A,(0,w.A)({},e,{ref:s,icon:j}))};const L=o.forwardRef(y);var p=t(6191),b=t(5885),k=t(617),C=t(9621),S=t(6178),v=t.n(S),N=t(579);const{Search:T}=i.A,{RangePicker:B}=n.A,{Option:z}=a.A,E=()=>{const[e,s]=(0,o.useState)([]),[t,i]=(0,o.useState)(!1),[n,a]=(0,o.useState)(""),[w,j]=(0,o.useState)(null),[I,y]=(0,o.useState)(!1);(0,o.useEffect)(()=>{S()},[]);const S=async()=>{i(!0);try{const e=await C.Bn.getLoginLogs();200===e.data.code&&s(e.data.rows||[])}catch(e){r.Ay.error("Failed to fetch login logs")}finally{i(!1)}},B=e=>"0"===e?"green":"red",z=e=>"0"===e?"Success":"Failed",E=(e.length>0?e:[{infoId:1,userName:"admin",ipaddr:"192.168.1.100",loginLocation:"Internal Network",browser:"Chrome 120.0.0.0",os:"Windows 10",status:"0",msg:"Login successful",loginTime:"2025-01-24 15:30:25"},{infoId:2,userName:"user001",ipaddr:"192.168.1.101",loginLocation:"Internal Network",browser:"Firefox 121.0",os:"macOS",status:"0",msg:"Login successful",loginTime:"2025-01-24 15:25:10"},{infoId:3,userName:"test",ipaddr:"192.168.1.102",loginLocation:"Internal Network",browser:"Safari 17.2",os:"macOS",status:"1",msg:"Invalid username or password",loginTime:"2025-01-24 15:20:45"},{infoId:4,userName:"admin",ipaddr:"192.168.1.100",loginLocation:"Internal Network",browser:"Chrome 120.0.0.0",os:"Windows 10",status:"0",msg:"Logout successful",loginTime:"2025-01-24 14:45:30"}]).filter(e=>!n||(e.userName.toLowerCase().includes(n.toLowerCase())||e.ipaddr.includes(n)||e.loginLocation.toLowerCase().includes(n.toLowerCase()))),O=[{title:"Log ID",dataIndex:"infoId",key:"infoId",width:100},{title:"Username",dataIndex:"userName",key:"userName",render:e=>(0,N.jsxs)(l.A,{children:[(0,N.jsx)(f.A,{style:{color:"#1890ff"}}),e]})},{title:"IP Address",dataIndex:"ipaddr",key:"ipaddr"},{title:"Login Location",dataIndex:"loginLocation",key:"loginLocation"},{title:"Browser",dataIndex:"browser",key:"browser",ellipsis:!0},{title:"Operating System",dataIndex:"os",key:"os"},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,N.jsx)(c.A,{color:B(e),icon:(0,N.jsx)(L,{}),children:z(e)})},{title:"Login Time",dataIndex:"loginTime",key:"loginTime",width:180,sorter:(e,s)=>v()(e.loginTime).unix()-v()(s.loginTime).unix()},{title:"Actions",key:"actions",width:120,render:(e,s)=>(0,N.jsx)(l.A,{size:"small",children:(0,N.jsx)(d.Ay,{type:"link",icon:(0,N.jsx)(p.A,{}),onClick:()=>(e=>{j(e),y(!0)})(s),size:"small",children:"View"})})}];return(0,N.jsxs)("div",{children:[(0,N.jsx)(g.A,{title:"Login Logs",style:{marginBottom:16},children:(0,N.jsxs)(u.A,{gutter:[16,16],justify:"space-between",align:"middle",children:[(0,N.jsx)(h.A,{span:8,children:(0,N.jsx)(T,{placeholder:"Search by username, IP, or location",value:n,onChange:e=>a(e.target.value),style:{width:"100%"}})}),(0,N.jsx)(h.A,{children:(0,N.jsxs)(l.A,{children:[(0,N.jsx)(d.Ay,{icon:(0,N.jsx)(b.A,{}),onClick:async()=>{try{const e=await C.Bn.exportLoginLogs(),s=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=s,t.setAttribute("download","login_logs.xlsx"),document.body.appendChild(t),t.click(),t.remove(),r.Ay.success("Export successful")}catch(e){r.Ay.error("Export failed")}},children:"Export"}),(0,N.jsx)(d.Ay,{icon:(0,N.jsx)(k.A,{}),onClick:S,children:"Refresh"})]})})]})}),(0,N.jsx)(g.A,{children:(0,N.jsx)(m.A,{columns:O,dataSource:E,rowKey:"infoId",loading:t,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,s)=>`${s[0]}-${s[1]} of ${e} items`}})}),w&&(0,N.jsx)(x.A,{title:"Login Log Details",visible:I,onCancel:()=>y(!1),footer:[(0,N.jsx)(d.Ay,{onClick:()=>y(!1),children:"Close"},"close")],width:600,children:(0,N.jsxs)(A.A,{bordered:!0,column:1,children:[(0,N.jsx)(A.A.Item,{label:"Log ID",children:w.infoId}),(0,N.jsx)(A.A.Item,{label:"Username",children:(0,N.jsxs)(l.A,{children:[(0,N.jsx)(f.A,{style:{color:"#1890ff"}}),w.userName]})}),(0,N.jsx)(A.A.Item,{label:"IP Address",children:w.ipaddr}),(0,N.jsx)(A.A.Item,{label:"Login Location",children:w.loginLocation}),(0,N.jsx)(A.A.Item,{label:"Browser",children:w.browser}),(0,N.jsx)(A.A.Item,{label:"Operating System",children:w.os}),(0,N.jsx)(A.A.Item,{label:"Login Status",children:(0,N.jsx)(c.A,{color:B(w.status),icon:(0,N.jsx)(L,{}),children:z(w.status)})}),(0,N.jsx)(A.A.Item,{label:"Login Time",children:w.loginTime}),(0,N.jsx)(A.A.Item,{label:"Message",children:(0,N.jsx)("div",{style:{color:"0"===w.status?"#52c41a":"#ff4d4f",fontWeight:"bold"},children:w.msg})})]})})]})}}}]);
//# sourceMappingURL=773.f75ecfd9.chunk.js.map