"use strict";(self.webpackChunkserat_frontend=self.webpackChunkserat_frontend||[]).push([[11],{1259:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(8168),c=a(5043);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};var r=a(2172),n=function(e,t){return c.createElement(r.A,(0,s.A)({},e,{ref:t,icon:l}))};const i=c.forwardRef(n)},6011:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var s=a(5043),c=a(2019),l=a(6399),r=a(6051),n=a(647),i=a(5206),o=a(9073),d=a(7419),h=a(1645),y=a(6612),u=a(7692),A=a(1005),x=a(1966),f=a(617),j=a(8168);const m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var g=a(2172),k=function(e,t){return s.createElement(g.A,(0,j.A)({},e,{ref:t,icon:m}))};const p=s.forwardRef(k);var v=a(1259),z=a(9621),C=a(579);const w=()=>{const[e,t]=(0,s.useState)(null),[a,j]=(0,s.useState)([]),[m,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{k(),w()},[]);const k=async()=>{g(!0);try{const e=await z.Bn.getCacheInfo();200===e.data.code&&t(e.data.data)}catch(e){c.Ay.error("Failed to fetch cache information")}finally{g(!1)}},w=async()=>{try{const e=await z.Bn.getCacheKeys();200===e.data.code&&j(e.data.data||[])}catch(e){c.Ay.error("Failed to fetch cache keys")}},H=[{title:"Cache Key",dataIndex:"key",key:"key",ellipsis:!0,width:300},{title:"Type",dataIndex:"type",key:"type",render:e=>(0,C.jsx)(l.A,{color:"blue",children:e})},{title:"Size",dataIndex:"size",key:"size",render:e=>`${e} bytes`},{title:"TTL",dataIndex:"ttl",key:"ttl",render:e=>-1===e?(0,C.jsx)(l.A,{color:"green",children:"Permanent"}):-2===e?(0,C.jsx)(l.A,{color:"red",children:"Expired"}):(0,C.jsxs)(l.A,{color:"orange",children:[e,"s"]})},{title:"Actions",key:"actions",width:120,render:(e,t)=>(0,C.jsx)(r.A,{size:"small",children:(0,C.jsx)(n.A,{title:"Delete Cache Key",description:"Are you sure you want to delete this cache key?",onConfirm:()=>(async e=>{try{const t=await z.Bn.deleteCacheKey(e);200===t.data.code?(c.Ay.success("Cache key deleted successfully"),w(),k()):c.Ay.error(t.data.msg||"Failed to delete cache key")}catch(t){c.Ay.error("Failed to delete cache key")}})(t.key),okText:"Yes",cancelText:"No",children:(0,C.jsx)(i.Ay,{type:"link",danger:!0,icon:(0,C.jsx)(x.A,{}),size:"small",children:"Delete"})})})}];return(0,C.jsx)("div",{children:(0,C.jsxs)(o.A,{title:"Redis Cache Monitoring",extra:(0,C.jsxs)(r.A,{children:[(0,C.jsx)(i.Ay,{icon:(0,C.jsx)(f.A,{}),onClick:()=>{k(),w()},loading:m,children:"Refresh"}),(0,C.jsx)(n.A,{title:"Clear All Cache",description:"Are you sure you want to clear all cache? This action cannot be undone.",onConfirm:async()=>{try{const e=await z.Bn.clearCache();200===e.data.code?(c.Ay.success("Cache cleared successfully"),k(),w()):c.Ay.error(e.data.msg||"Failed to clear cache")}catch(e){c.Ay.error("Failed to clear cache")}},okText:"Yes",cancelText:"No",children:(0,C.jsx)(i.Ay,{danger:!0,icon:(0,C.jsx)(p,{}),children:"Clear All"})})]}),children:[(0,C.jsxs)(d.A,{gutter:[16,16],style:{marginBottom:24},children:[(0,C.jsx)(h.A,{span:6,children:(0,C.jsx)(o.A,{size:"small",children:(0,C.jsx)(y.A,{title:"Total Keys",value:156,prefix:(0,C.jsx)(v.A,{}),valueStyle:{color:"#1890ff"}})})}),(0,C.jsx)(h.A,{span:6,children:(0,C.jsxs)(o.A,{size:"small",children:[(0,C.jsx)(y.A,{title:"Memory Usage",value:24.5,precision:1,suffix:"MB",valueStyle:{color:"#52c41a"}}),(0,C.jsx)(u.A,{percent:65.2,showInfo:!1})]})}),(0,C.jsx)(h.A,{span:6,children:(0,C.jsxs)(o.A,{size:"small",children:[(0,C.jsx)(y.A,{title:"Hit Rate",value:94.2,precision:1,suffix:"%",valueStyle:{color:"#722ed1"}}),(0,C.jsx)(u.A,{percent:94.2,showInfo:!1,strokeColor:"#722ed1"})]})}),(0,C.jsx)(h.A,{span:6,children:(0,C.jsx)(o.A,{size:"small",children:(0,C.jsx)(y.A,{title:"Connected Clients",value:8,valueStyle:{color:"#fa8c16"}})})})]}),(0,C.jsx)(o.A,{title:"Cache Keys",size:"small",children:(0,C.jsx)(A.A,{columns:H,dataSource:a.length>0?a:[{key:"login_tokens:user:123",type:"string",size:1024,ttl:3600},{key:"user_session:456",type:"hash",size:2048,ttl:7200},{key:"cache:menu:tree",type:"string",size:512,ttl:-1},{key:"rate_limit:192.168.1.1",type:"string",size:64,ttl:60}],rowKey:"key",loading:m,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`}})})]})})}}}]);
//# sourceMappingURL=11.9e716cb1.chunk.js.map