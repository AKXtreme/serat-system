"use strict";(self.webpackChunkserat_frontend=self.webpackChunkserat_frontend||[]).push([[757],{6757:(e,t,i)=>{i.r(t),i.d(t,{default:()=>V});var s=i(5043),n=i(5444),a=i(6497),l=i(3427),c=i(2019),r=i(6051),o=i(5206),d=i(6399),h=i(7490),x=i(647),u=i(9073),m=i(7419),A=i(1645),y=i(1005),j=i(2751),p=i(691),g=i(8168);const T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c-3.8 0-7.7.7-11.6 2.3L292 345.9H128c-8.8 0-16 7.4-16 16.6v299c0 9.2 7.2 16.6 16 16.6h101.7c-3.7 11.6-5.7 23.9-5.7 36.4 0 65.9 53.8 119.5 120 119.5 55.4 0 102.1-37.6 115.9-88.4l408.6 164.2c3.9 1.5 7.8 2.3 11.6 2.3 16.9 0 32-14.2 32-33.2V145.2C912 126.2 897 112 880 112zM344 762.3c-26.5 0-48-21.4-48-47.8 0-11.2 3.9-21.9 11-30.4l84.9 34.1c-2 24.6-22.7 44.1-47.9 44.1zm496 58.4L318.8 611.3l-12.9-5.2H184V417.9h121.9l12.9-5.2L840 203.3v617.4z"}}]},name:"notification",theme:"outlined"};var k=i(2172),w=function(e,t){return s.createElement(k.A,(0,g.A)({},e,{ref:t,icon:T}))};const f=s.forwardRef(w);var C=i(8502),N=i(6191),I=i(7407),b=i(1966),v=i(5337),S=i(617),z=i(9621),L=i(6178),F=i.n(L),B=i(579);const{Search:E,TextArea:q}=n.A,{Option:R}=a.A,V=()=>{const[e,t]=(0,s.useState)([]),[i,g]=(0,s.useState)(!1),[T,k]=(0,s.useState)(!1),[w,L]=(0,s.useState)(!1),[V,$]=(0,s.useState)("add"),[D,H]=(0,s.useState)(null),[U,M]=(0,s.useState)(""),[P]=l.A.useForm();(0,s.useEffect)(()=>{O()},[]);const O=async()=>{g(!0);try{const e=await z.mq.getNotices();200===e.data.code&&t(e.data.rows||[])}catch(e){c.Ay.error("Failed to fetch notices")}finally{g(!1)}},_=e=>{$("edit"),H(e),P.setFieldsValue({...e}),k(!0)},J=e=>{H(e),L(!0)},K=e=>({1:"Notice",2:"Announcement"}[e]||"Unknown"),Q=e=>({1:"blue",2:"green"}[e]||"default"),Y=e=>"0"===e?"Normal":"Closed",G=e.filter(e=>!U||(e.noticeTitle.toLowerCase().includes(U.toLowerCase())||e.noticeContent.toLowerCase().includes(U.toLowerCase())||e.createBy.toLowerCase().includes(U.toLowerCase()))),W=[{title:"Notice ID",dataIndex:"noticeId",key:"noticeId",width:100},{title:"Notice Title",dataIndex:"noticeTitle",key:"noticeTitle",render:(e,t)=>(0,B.jsxs)(r.A,{children:["1"===t.noticeType?(0,B.jsx)(f,{style:{color:"#1890ff"}}):(0,B.jsx)(C.A,{style:{color:"#52c41a"}}),(0,B.jsx)(o.Ay,{type:"link",onClick:()=>J(t),style:{padding:0},children:e})]})},{title:"Notice Type",dataIndex:"noticeType",key:"noticeType",render:e=>(0,B.jsx)(d.A,{color:Q(e),children:K(e)})},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,B.jsx)(h.A,{status:"0"===e?"processing":"error",text:Y(e)})},{title:"Create By",dataIndex:"createBy",key:"createBy"},{title:"Create Time",dataIndex:"createTime",key:"createTime",width:180,sorter:(e,t)=>F()(e.createTime).unix()-F()(t.createTime).unix()},{title:"Update Time",dataIndex:"updateTime",key:"updateTime",width:180,render:e=>e||"-"},{title:"Actions",key:"actions",width:200,render:(e,t)=>(0,B.jsxs)(r.A,{size:"small",children:[(0,B.jsx)(o.Ay,{type:"link",icon:(0,B.jsx)(N.A,{}),onClick:()=>J(t),size:"small",children:"View"}),(0,B.jsx)(o.Ay,{type:"link",icon:(0,B.jsx)(I.A,{}),onClick:()=>_(t),size:"small",children:"Edit"}),(0,B.jsx)(x.A,{title:"Delete Notice",description:"Are you sure you want to delete this notice?",onConfirm:()=>(async e=>{try{const t=await z.mq.deleteNotice(e);200===t.data.code?(c.Ay.success("Notice deleted successfully"),O()):c.Ay.error(t.data.msg||"Failed to delete notice")}catch(t){c.Ay.error("Failed to delete notice")}})(t.noticeId),okText:"Yes",cancelText:"No",children:(0,B.jsx)(o.Ay,{type:"link",danger:!0,icon:(0,B.jsx)(b.A,{}),size:"small",children:"Delete"})})]})}];return(0,B.jsxs)("div",{children:[(0,B.jsx)(u.A,{title:"Notice Management",style:{marginBottom:16},children:(0,B.jsxs)(m.A,{gutter:[16,16],justify:"space-between",align:"middle",children:[(0,B.jsx)(A.A,{span:8,children:(0,B.jsx)(E,{placeholder:"Search notices",value:U,onChange:e=>M(e.target.value),style:{width:"100%"}})}),(0,B.jsx)(A.A,{children:(0,B.jsxs)(r.A,{children:[(0,B.jsx)(o.Ay,{type:"primary",icon:(0,B.jsx)(v.A,{}),onClick:()=>{$("add"),H(null),P.resetFields(),P.setFieldsValue({noticeType:"1",status:"0"}),k(!0)},children:"Add Notice"}),(0,B.jsx)(o.Ay,{icon:(0,B.jsx)(S.A,{}),onClick:O,children:"Refresh"})]})})]})}),(0,B.jsx)(u.A,{children:(0,B.jsx)(y.A,{columns:W,dataSource:G,rowKey:"noticeId",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`}})}),(0,B.jsx)(j.A,{title:"add"===V?"Add Notice":"Edit Notice",visible:T,onOk:async()=>{try{const e={...await P.validateFields(),noticeId:"edit"===V?D.noticeId:void 0};let t;t="add"===V?await z.mq.createNotice(e):await z.mq.updateNotice(e),200===t.data.code?(c.Ay.success(`Notice ${"add"===V?"created":"updated"} successfully`),k(!1),O()):c.Ay.error(t.data.msg||`Failed to ${V} notice`)}catch(e){c.Ay.error(`Failed to ${V} notice`)}},onCancel:()=>k(!1),width:800,okText:"add"===V?"Create":"Update",children:(0,B.jsxs)(l.A,{form:P,layout:"vertical",initialValues:{noticeType:"1",status:"0"},children:[(0,B.jsxs)(m.A,{gutter:16,children:[(0,B.jsx)(A.A,{span:12,children:(0,B.jsx)(l.A.Item,{name:"noticeTitle",label:"Notice Title",rules:[{required:!0,message:"Please input notice title!"},{min:2,max:50,message:"Notice title must be 2-50 characters!"}],children:(0,B.jsx)(n.A,{placeholder:"Enter notice title"})})}),(0,B.jsx)(A.A,{span:12,children:(0,B.jsx)(l.A.Item,{name:"noticeType",label:"Notice Type",rules:[{required:!0,message:"Please select notice type!"}],children:(0,B.jsxs)(a.A,{children:[(0,B.jsx)(R,{value:"1",children:"Notice"}),(0,B.jsx)(R,{value:"2",children:"Announcement"})]})})})]}),(0,B.jsx)(m.A,{gutter:16,children:(0,B.jsx)(A.A,{span:24,children:(0,B.jsx)(l.A.Item,{name:"status",label:"Status",children:(0,B.jsxs)(a.A,{children:[(0,B.jsx)(R,{value:"0",children:"Normal"}),(0,B.jsx)(R,{value:"1",children:"Closed"})]})})})}),(0,B.jsx)(m.A,{gutter:16,children:(0,B.jsx)(A.A,{span:24,children:(0,B.jsx)(l.A.Item,{name:"noticeContent",label:"Notice Content",rules:[{required:!0,message:"Please input notice content!"},{min:10,max:2e3,message:"Notice content must be 10-2000 characters!"}],children:(0,B.jsx)(q,{rows:10,placeholder:"Enter notice content",showCount:!0,maxLength:2e3})})})}),(0,B.jsx)(m.A,{gutter:16,children:(0,B.jsx)(A.A,{span:24,children:(0,B.jsx)(l.A.Item,{name:"remark",label:"Remark",children:(0,B.jsx)(q,{rows:3,placeholder:"Enter remark (optional)",maxLength:500})})})})]})}),(0,B.jsx)(j.A,{title:"Notice Details",visible:w,onCancel:()=>L(!1),footer:[(0,B.jsx)(o.Ay,{onClick:()=>L(!1),children:"Close"},"close"),(0,B.jsx)(o.Ay,{type:"primary",onClick:()=>{L(!1),_(D)},children:"Edit"},"edit")],width:800,children:D&&(0,B.jsxs)("div",{children:[(0,B.jsxs)(p.A,{bordered:!0,column:2,style:{marginBottom:24},children:[(0,B.jsx)(p.A.Item,{label:"Notice ID",span:1,children:D.noticeId}),(0,B.jsx)(p.A.Item,{label:"Notice Type",span:1,children:(0,B.jsx)(d.A,{color:Q(D.noticeType),children:K(D.noticeType)})}),(0,B.jsx)(p.A.Item,{label:"Notice Title",span:2,children:(0,B.jsx)("strong",{children:D.noticeTitle})}),(0,B.jsx)(p.A.Item,{label:"Status",span:1,children:(0,B.jsx)(h.A,{status:"0"===D.status?"processing":"error",text:Y(D.status)})}),(0,B.jsx)(p.A.Item,{label:"Create By",span:1,children:D.createBy}),(0,B.jsx)(p.A.Item,{label:"Create Time",span:1,children:D.createTime}),(0,B.jsx)(p.A.Item,{label:"Update Time",span:1,children:D.updateTime||"-"})]}),(0,B.jsx)(u.A,{title:"Notice Content",size:"small",children:(0,B.jsx)("div",{style:{minHeight:200,padding:"16px",background:"#fafafa",borderRadius:"6px",lineHeight:1.6,whiteSpace:"pre-wrap"},children:D.noticeContent})}),D.remark&&(0,B.jsx)(u.A,{title:"Remark",size:"small",style:{marginTop:16},children:(0,B.jsx)("div",{style:{padding:"8px",background:"#f0f0f0",borderRadius:"4px",fontStyle:"italic"},children:D.remark})})]})})]})}}}]);
//# sourceMappingURL=757.9e514d7b.chunk.js.map