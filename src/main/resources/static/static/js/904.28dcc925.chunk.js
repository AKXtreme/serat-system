/*! For license information please see 904.28dcc925.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkserat_frontend=self.webpackChunkserat_frontend||[]).push([[904],{6904:(e,t,c)=>{c.r(t),c.d(t,{default:()=>L});var a=c(5043),n=c(5444),s=c(2019),l=c(6051),r=c(6399),o=c(647),i=c(5206),d=c(7419),u=c(1645),h=c(9073),m=c(6612),x=c(1005),A=c(3722),g=c(8168);const f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"};var y=c(2172),j=function(e,t){return a.createElement(y.A,(0,g.A)({},e,{ref:t,icon:f}))};const p=a.forwardRef(j);const z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M956.9 845.1L896.4 632V168c0-17.7-14.3-32-32-32h-704c-17.7 0-32 14.3-32 32v464L67.9 845.1C60.4 866 75.8 888 98 888h828.8c22.2 0 37.6-22 30.1-42.9zM200.4 208h624v395h-624V208zm228.3 608l8.1-37h150.3l8.1 37H428.7zm224 0l-19.1-86.7c-.8-3.7-4.1-6.3-7.8-6.3H398.2c-3.8 0-7 2.6-7.8 6.3L371.3 816H151l42.3-149h638.2l42.3 149H652.7z"}}]},name:"laptop",theme:"outlined"};var v=function(e,t){return a.createElement(y.A,(0,g.A)({},e,{ref:t,icon:z}))};const w=a.forwardRef(v);const k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"};var I=function(e,t){return a.createElement(y.A,(0,g.A)({},e,{ref:t,icon:k}))};const S=a.forwardRef(I);var C=c(617),M=c(9621),H=c(579);const{Search:b}=n.A,L=()=>{const[e,t]=(0,a.useState)([]),[c,n]=(0,a.useState)(!1),[g,f]=(0,a.useState)({});(0,a.useEffect)(()=>{y();const e=setInterval(y,3e4);return()=>clearInterval(e)},[g]);const y=async()=>{n(!0);try{const e=await M.Bn.getOnlineUsers(g);200===e.data.code&&t(e.data.rows||[])}catch(e){s.Ay.error("Failed to fetch online users")}finally{n(!1)}},j=[{title:"Session ID",dataIndex:"tokenId",key:"tokenId",width:200,ellipsis:!0},{title:"Username",dataIndex:"userName",key:"userName",render:e=>(0,H.jsxs)(l.A,{children:[(0,H.jsx)(A.A,{}),e]})},{title:"Department",dataIndex:"deptName",key:"deptName"},{title:"IP Address",dataIndex:"ipaddr",key:"ipaddr",render:e=>(0,H.jsxs)(l.A,{children:[(0,H.jsx)(p,{}),e]})},{title:"Location",dataIndex:"loginLocation",key:"loginLocation"},{title:"Browser",dataIndex:"browser",key:"browser",render:e=>(0,H.jsxs)(l.A,{children:[(0,H.jsx)(w,{}),e]})},{title:"OS",dataIndex:"os",key:"os"},{title:"Login Time",dataIndex:"loginTime",key:"loginTime",width:180},{title:"Status",dataIndex:"status",key:"status",render:()=>(0,H.jsx)(r.A,{color:"green",children:"Online"})},{title:"Actions",key:"actions",width:120,render:(e,t)=>(0,H.jsx)(o.A,{title:"Force Logout",description:"Are you sure you want to force this user to logout?",onConfirm:()=>(async e=>{try{const t=await M.Bn.forceLogout(e);200===t.data.code?(s.Ay.success("User logged out successfully"),y()):s.Ay.error(t.data.msg||"Failed to logout user")}catch(t){s.Ay.error("Failed to logout user")}})(t.tokenId),okText:"Yes",cancelText:"No",children:(0,H.jsx)(i.Ay,{type:"link",danger:!0,icon:(0,H.jsx)(S,{}),size:"small",children:"Force Logout"})})}],z=[{title:"Total Online",value:e.length,icon:(0,H.jsx)(A.A,{}),color:"#1890ff"},{title:"Unique IPs",value:new Set(e.map(e=>e.ipaddr)).size,icon:(0,H.jsx)(p,{}),color:"#52c41a"},{title:"Active Sessions",value:e.filter(e=>"online"===e.status).length,icon:(0,H.jsx)(w,{}),color:"#faad14"}];return(0,H.jsxs)("div",{children:[(0,H.jsx)(d.A,{gutter:[16,16],style:{marginBottom:24},children:z.map((e,t)=>(0,H.jsx)(u.A,{span:8,children:(0,H.jsx)(h.A,{children:(0,H.jsx)(m.A,{title:e.title,value:e.value,prefix:e.icon,valueStyle:{color:e.color}})})},t))}),(0,H.jsx)(h.A,{style:{marginBottom:16},children:(0,H.jsxs)(d.A,{gutter:[16,16],justify:"space-between",align:"middle",children:[(0,H.jsx)(u.A,{span:8,children:(0,H.jsx)(b,{placeholder:"Search by username",allowClear:!0,onSearch:e=>{f({userName:e})},style:{width:"100%"}})}),(0,H.jsx)(u.A,{children:(0,H.jsx)(l.A,{children:(0,H.jsx)(i.Ay,{type:"primary",icon:(0,H.jsx)(C.A,{}),onClick:y,loading:c,children:"Refresh"})})})]})}),(0,H.jsx)(h.A,{title:`Online Users (${e.length})`,children:(0,H.jsx)(x.A,{columns:j,dataSource:e,rowKey:"tokenId",loading:c,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`},scroll:{x:1200}})})]})}}}]);
//# sourceMappingURL=904.28dcc925.chunk.js.map