{"ast":null,"code":"var _jsxFileName = \"/Users/mariamagera/Downloads/serat/frontend/src/components/System/RoleManagement.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Card, Table, Button, Space, Input, Modal, Form, message, Popconfirm, Tag, Row, Col, Select, Switch, Tree } from 'antd';\nimport { PlusOutlined, EditOutlined, DeleteOutlined, SearchOutlined, ReloadOutlined, SafetyCertificateOutlined, UserOutlined } from '@ant-design/icons';\nimport { systemAPI } from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Search\n} = Input;\nconst {\n  Option\n} = Select;\nconst RoleManagement = () => {\n  _s();\n  const [roles, setRoles] = useState([]);\n  const [menus, setMenus] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [pagination, setPagination] = useState({\n    current: 1,\n    pageSize: 10,\n    total: 0\n  });\n  const [searchParams, setSearchParams] = useState({});\n  const [modalVisible, setModalVisible] = useState(false);\n  const [permissionModalVisible, setPermissionModalVisible] = useState(false);\n  const [modalType, setModalType] = useState('add');\n  const [selectedRole, setSelectedRole] = useState(null);\n  const [selectedMenuKeys, setSelectedMenuKeys] = useState([]);\n  const [form] = Form.useForm();\n  useEffect(() => {\n    fetchRoles();\n    fetchMenus();\n  }, [pagination.current, pagination.pageSize, searchParams]);\n  const fetchRoles = async () => {\n    setLoading(true);\n    try {\n      const response = await systemAPI.getRoles({\n        pageNum: pagination.current,\n        pageSize: pagination.pageSize,\n        ...searchParams\n      });\n      if (response.data.code === 200) {\n        setRoles(response.data.rows || []);\n        setPagination(prev => ({\n          ...prev,\n          total: response.data.total || 0\n        }));\n      }\n    } catch (error) {\n      message.error('Failed to fetch roles');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchMenus = async () => {\n    try {\n      const response = await systemAPI.getMenus();\n      if (response.data.code === 200) {\n        setMenus(response.data.data || []);\n      }\n    } catch (error) {\n      console.error('Failed to fetch menus:', error);\n    }\n  };\n  const handleSearch = value => {\n    setSearchParams({\n      roleName: value\n    });\n    setPagination(prev => ({\n      ...prev,\n      current: 1\n    }));\n  };\n  const handleTableChange = pagination => {\n    setPagination(pagination);\n  };\n  const handleAdd = () => {\n    setModalType('add');\n    setSelectedRole(null);\n    form.resetFields();\n    setModalVisible(true);\n  };\n  const handleEdit = record => {\n    setModalType('edit');\n    setSelectedRole(record);\n    form.setFieldsValue(record);\n    setModalVisible(true);\n  };\n  const handleDelete = async roleId => {\n    try {\n      const response = await systemAPI.deleteRole(roleId);\n      if (response.data.code === 200) {\n        message.success('Role deleted successfully');\n        fetchRoles();\n      } else {\n        message.error(response.data.msg || 'Failed to delete role');\n      }\n    } catch (error) {\n      message.error('Failed to delete role');\n    }\n  };\n  const handleAssignPermissions = record => {\n    setSelectedRole(record);\n    setSelectedMenuKeys(record.menuIds || []);\n    setPermissionModalVisible(true);\n  };\n  const handleModalOk = async () => {\n    try {\n      const values = await form.validateFields();\n      const roleData = {\n        ...values,\n        roleId: modalType === 'edit' ? selectedRole.roleId : undefined\n      };\n      let response;\n      if (modalType === 'add') {\n        response = await systemAPI.createRole(roleData);\n      } else {\n        response = await systemAPI.updateRole(roleData);\n      }\n      if (response.data.code === 200) {\n        message.success(`Role ${modalType === 'add' ? 'created' : 'updated'} successfully`);\n        setModalVisible(false);\n        fetchRoles();\n      } else {\n        message.error(response.data.msg || `Failed to ${modalType} role`);\n      }\n    } catch (error) {\n      message.error(`Failed to ${modalType} role`);\n    }\n  };\n  const handlePermissionOk = async () => {\n    try {\n      const response = await systemAPI.updateRoleMenus({\n        roleId: selectedRole.roleId,\n        menuIds: selectedMenuKeys\n      });\n      if (response.data.code === 200) {\n        message.success('Permissions updated successfully');\n        setPermissionModalVisible(false);\n        fetchRoles();\n      } else {\n        message.error(response.data.msg || 'Failed to update permissions');\n      }\n    } catch (error) {\n      message.error('Failed to update permissions');\n    }\n  };\n  const buildMenuTree = (menus, parentId = 0) => {\n    return menus.filter(menu => menu.parentId === parentId).map(menu => ({\n      title: menu.menuName,\n      key: menu.menuId,\n      children: buildMenuTree(menus, menu.menuId)\n    }));\n  };\n  const columns = [{\n    title: 'Role ID',\n    dataIndex: 'roleId',\n    key: 'roleId',\n    width: 80\n  }, {\n    title: 'Role Name',\n    dataIndex: 'roleName',\n    key: 'roleName',\n    render: text => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(SafetyCertificateOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this), text]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: 'Role Key',\n    dataIndex: 'roleKey',\n    key: 'roleKey',\n    render: text => /*#__PURE__*/_jsxDEV(Tag, {\n      color: \"blue\",\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 25\n    }, this)\n  }, {\n    title: 'Sort Order',\n    dataIndex: 'roleSort',\n    key: 'roleSort',\n    width: 100\n  }, {\n    title: 'Data Scope',\n    dataIndex: 'dataScope',\n    key: 'dataScope',\n    render: dataScope => {\n      const scopeMap = {\n        '1': 'All data',\n        '2': 'Custom data',\n        '3': 'Department data',\n        '4': 'Department and sub-department data',\n        '5': 'Personal data only'\n      };\n      return /*#__PURE__*/_jsxDEV(Tag, {\n        color: \"green\",\n        children: scopeMap[dataScope] || 'Unknown'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 16\n      }, this);\n    }\n  }, {\n    title: 'Status',\n    dataIndex: 'status',\n    key: 'status',\n    render: status => /*#__PURE__*/_jsxDEV(Tag, {\n      color: status === '0' ? 'green' : 'red',\n      children: status === '0' ? 'Active' : 'Inactive'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: 'Create Time',\n    dataIndex: 'createTime',\n    key: 'createTime',\n    width: 180\n  }, {\n    title: 'Actions',\n    key: 'actions',\n    width: 300,\n    render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n      size: \"small\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"link\",\n        icon: /*#__PURE__*/_jsxDEV(EditOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 19\n        }, this),\n        onClick: () => handleEdit(record),\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"link\",\n        icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 19\n        }, this),\n        onClick: () => handleAssignPermissions(record),\n        children: \"Permissions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n        title: \"Delete Role\",\n        description: \"Are you sure you want to delete this role?\",\n        onConfirm: () => handleDelete(record.roleId),\n        okText: \"Yes\",\n        cancelText: \"No\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"link\",\n          danger: true,\n          icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 46\n          }, this),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      title: \"Role Management\",\n      style: {\n        marginBottom: 16\n      },\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        gutter: [16, 16],\n        justify: \"space-between\",\n        align: \"middle\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          span: 8,\n          children: /*#__PURE__*/_jsxDEV(Search, {\n            placeholder: \"Search by role name\",\n            onSearch: handleSearch,\n            style: {\n              width: '100%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Space, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              icon: /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 23\n              }, this),\n              onClick: handleAdd,\n              children: \"Add Role\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              icon: /*#__PURE__*/_jsxDEV(ReloadOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 23\n              }, this),\n              onClick: fetchRoles,\n              children: \"Refresh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        columns: columns,\n        dataSource: roles,\n        rowKey: \"roleId\",\n        loading: loading,\n        pagination: {\n          ...pagination,\n          showSizeChanger: true,\n          showQuickJumper: true,\n          showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} items`\n        },\n        onChange: handleTableChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: modalType === 'add' ? 'Add Role' : 'Edit Role',\n      visible: modalVisible,\n      onOk: handleModalOk,\n      onCancel: () => setModalVisible(false),\n      width: 600,\n      okText: modalType === 'add' ? 'Create' : 'Update',\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        layout: \"vertical\",\n        initialValues: {\n          status: '0',\n          dataScope: '1',\n          menuCheckStrictly: true,\n          deptCheckStrictly: true\n        },\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          gutter: 16,\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 12,\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"roleName\",\n              label: \"Role Name\",\n              rules: [{\n                required: true,\n                message: 'Please input role name!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                placeholder: \"Enter role name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 12,\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"roleKey\",\n              label: \"Role Key\",\n              rules: [{\n                required: true,\n                message: 'Please input role key!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                placeholder: \"Enter role key\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          gutter: 16,\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 12,\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"roleSort\",\n              label: \"Sort Order\",\n              rules: [{\n                required: true,\n                message: 'Please input sort order!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                type: \"number\",\n                placeholder: \"Enter sort order\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 12,\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"status\",\n              label: \"Status\",\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                children: [/*#__PURE__*/_jsxDEV(Option, {\n                  value: \"0\",\n                  children: \"Active\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Option, {\n                  value: \"1\",\n                  children: \"Inactive\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          gutter: 16,\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            span: 24,\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"dataScope\",\n              label: \"Data Scope\",\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                children: [/*#__PURE__*/_jsxDEV(Option, {\n                  value: \"1\",\n                  children: \"All data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Option, {\n                  value: \"2\",\n                  children: \"Custom data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Option, {\n                  value: \"3\",\n                  children: \"Department data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Option, {\n                  value: \"4\",\n                  children: \"Department and sub-department data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Option, {\n                  value: \"5\",\n                  children: \"Personal data only\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          gutter: 16,\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            span: 24,\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"remark\",\n              label: \"Remark\",\n              children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n                rows: 4,\n                placeholder: \"Enter remark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: `Assign Permissions - ${selectedRole === null || selectedRole === void 0 ? void 0 : selectedRole.roleName}`,\n      visible: permissionModalVisible,\n      onOk: handlePermissionOk,\n      onCancel: () => setPermissionModalVisible(false),\n      width: 500,\n      okText: \"Save Permissions\",\n      children: /*#__PURE__*/_jsxDEV(Tree, {\n        checkable: true,\n        checkedKeys: selectedMenuKeys,\n        onCheck: setSelectedMenuKeys,\n        treeData: buildMenuTree(menus),\n        height: 400\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 286,\n    columnNumber: 5\n  }, this);\n};\n_s(RoleManagement, \"5L5km44zjPgAHnpn7kISllyh/N8=\", false, function () {\n  return [Form.useForm];\n});\n_c = RoleManagement;\nexport default RoleManagement;\nvar _c;\n$RefreshReg$(_c, \"RoleManagement\");","map":{"version":3,"names":["React","useState","useEffect","Card","Table","Button","Space","Input","Modal","Form","message","Popconfirm","Tag","Row","Col","Select","Switch","Tree","PlusOutlined","EditOutlined","DeleteOutlined","SearchOutlined","ReloadOutlined","SafetyCertificateOutlined","UserOutlined","systemAPI","jsxDEV","_jsxDEV","Search","Option","RoleManagement","_s","roles","setRoles","menus","setMenus","loading","setLoading","pagination","setPagination","current","pageSize","total","searchParams","setSearchParams","modalVisible","setModalVisible","permissionModalVisible","setPermissionModalVisible","modalType","setModalType","selectedRole","setSelectedRole","selectedMenuKeys","setSelectedMenuKeys","form","useForm","fetchRoles","fetchMenus","response","getRoles","pageNum","data","code","rows","prev","error","getMenus","console","handleSearch","value","roleName","handleTableChange","handleAdd","resetFields","handleEdit","record","setFieldsValue","handleDelete","roleId","deleteRole","success","msg","handleAssignPermissions","menuIds","handleModalOk","values","validateFields","roleData","undefined","createRole","updateRole","handlePermissionOk","updateRoleMenus","buildMenuTree","parentId","filter","menu","map","title","menuName","key","menuId","children","columns","dataIndex","width","render","text","fileName","_jsxFileName","lineNumber","columnNumber","color","dataScope","scopeMap","status","_","size","type","icon","onClick","description","onConfirm","okText","cancelText","danger","style","marginBottom","gutter","justify","align","span","placeholder","onSearch","dataSource","rowKey","showSizeChanger","showQuickJumper","showTotal","range","onChange","visible","onOk","onCancel","layout","initialValues","menuCheckStrictly","deptCheckStrictly","Item","name","label","rules","required","TextArea","checkable","checkedKeys","onCheck","treeData","height","_c","$RefreshReg$"],"sources":["/Users/mariamagera/Downloads/serat/frontend/src/components/System/RoleManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Card,\n  Table,\n  Button,\n  Space,\n  Input,\n  Modal,\n  Form,\n  message,\n  Popconfirm,\n  Tag,\n  Row,\n  Col,\n  Select,\n  Switch,\n  Tree\n} from 'antd';\nimport {\n  PlusOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  SearchOutlined,\n  ReloadOutlined,\n  SafetyCertificateOutlined,\n  UserOutlined\n} from '@ant-design/icons';\nimport { systemAPI } from '../../services/api';\n\nconst { Search } = Input;\nconst { Option } = Select;\n\nconst RoleManagement = () => {\n  const [roles, setRoles] = useState([]);\n  const [menus, setMenus] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [pagination, setPagination] = useState({\n    current: 1,\n    pageSize: 10,\n    total: 0,\n  });\n  const [searchParams, setSearchParams] = useState({});\n  const [modalVisible, setModalVisible] = useState(false);\n  const [permissionModalVisible, setPermissionModalVisible] = useState(false);\n  const [modalType, setModalType] = useState('add');\n  const [selectedRole, setSelectedRole] = useState(null);\n  const [selectedMenuKeys, setSelectedMenuKeys] = useState([]);\n  const [form] = Form.useForm();\n\n  useEffect(() => {\n    fetchRoles();\n    fetchMenus();\n  }, [pagination.current, pagination.pageSize, searchParams]);\n\n  const fetchRoles = async () => {\n    setLoading(true);\n    try {\n      const response = await systemAPI.getRoles({\n        pageNum: pagination.current,\n        pageSize: pagination.pageSize,\n        ...searchParams,\n      });\n      \n      if (response.data.code === 200) {\n        setRoles(response.data.rows || []);\n        setPagination(prev => ({\n          ...prev,\n          total: response.data.total || 0,\n        }));\n      }\n    } catch (error) {\n      message.error('Failed to fetch roles');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMenus = async () => {\n    try {\n      const response = await systemAPI.getMenus();\n      if (response.data.code === 200) {\n        setMenus(response.data.data || []);\n      }\n    } catch (error) {\n      console.error('Failed to fetch menus:', error);\n    }\n  };\n\n  const handleSearch = (value) => {\n    setSearchParams({ roleName: value });\n    setPagination(prev => ({ ...prev, current: 1 }));\n  };\n\n  const handleTableChange = (pagination) => {\n    setPagination(pagination);\n  };\n\n  const handleAdd = () => {\n    setModalType('add');\n    setSelectedRole(null);\n    form.resetFields();\n    setModalVisible(true);\n  };\n\n  const handleEdit = (record) => {\n    setModalType('edit');\n    setSelectedRole(record);\n    form.setFieldsValue(record);\n    setModalVisible(true);\n  };\n\n  const handleDelete = async (roleId) => {\n    try {\n      const response = await systemAPI.deleteRole(roleId);\n      if (response.data.code === 200) {\n        message.success('Role deleted successfully');\n        fetchRoles();\n      } else {\n        message.error(response.data.msg || 'Failed to delete role');\n      }\n    } catch (error) {\n      message.error('Failed to delete role');\n    }\n  };\n\n  const handleAssignPermissions = (record) => {\n    setSelectedRole(record);\n    setSelectedMenuKeys(record.menuIds || []);\n    setPermissionModalVisible(true);\n  };\n\n  const handleModalOk = async () => {\n    try {\n      const values = await form.validateFields();\n      const roleData = {\n        ...values,\n        roleId: modalType === 'edit' ? selectedRole.roleId : undefined,\n      };\n\n      let response;\n      if (modalType === 'add') {\n        response = await systemAPI.createRole(roleData);\n      } else {\n        response = await systemAPI.updateRole(roleData);\n      }\n\n      if (response.data.code === 200) {\n        message.success(`Role ${modalType === 'add' ? 'created' : 'updated'} successfully`);\n        setModalVisible(false);\n        fetchRoles();\n      } else {\n        message.error(response.data.msg || `Failed to ${modalType} role`);\n      }\n    } catch (error) {\n      message.error(`Failed to ${modalType} role`);\n    }\n  };\n\n  const handlePermissionOk = async () => {\n    try {\n      const response = await systemAPI.updateRoleMenus({\n        roleId: selectedRole.roleId,\n        menuIds: selectedMenuKeys,\n      });\n\n      if (response.data.code === 200) {\n        message.success('Permissions updated successfully');\n        setPermissionModalVisible(false);\n        fetchRoles();\n      } else {\n        message.error(response.data.msg || 'Failed to update permissions');\n      }\n    } catch (error) {\n      message.error('Failed to update permissions');\n    }\n  };\n\n  const buildMenuTree = (menus, parentId = 0) => {\n    return menus\n      .filter(menu => menu.parentId === parentId)\n      .map(menu => ({\n        title: menu.menuName,\n        key: menu.menuId,\n        children: buildMenuTree(menus, menu.menuId),\n      }));\n  };\n\n  const columns = [\n    {\n      title: 'Role ID',\n      dataIndex: 'roleId',\n      key: 'roleId',\n      width: 80,\n    },\n    {\n      title: 'Role Name',\n      dataIndex: 'roleName',\n      key: 'roleName',\n      render: (text) => (\n        <Space>\n          <SafetyCertificateOutlined />\n          {text}\n        </Space>\n      ),\n    },\n    {\n      title: 'Role Key',\n      dataIndex: 'roleKey',\n      key: 'roleKey',\n      render: (text) => <Tag color=\"blue\">{text}</Tag>,\n    },\n    {\n      title: 'Sort Order',\n      dataIndex: 'roleSort',\n      key: 'roleSort',\n      width: 100,\n    },\n    {\n      title: 'Data Scope',\n      dataIndex: 'dataScope',\n      key: 'dataScope',\n      render: (dataScope) => {\n        const scopeMap = {\n          '1': 'All data',\n          '2': 'Custom data',\n          '3': 'Department data',\n          '4': 'Department and sub-department data',\n          '5': 'Personal data only',\n        };\n        return <Tag color=\"green\">{scopeMap[dataScope] || 'Unknown'}</Tag>;\n      },\n    },\n    {\n      title: 'Status',\n      dataIndex: 'status',\n      key: 'status',\n      render: (status) => (\n        <Tag color={status === '0' ? 'green' : 'red'}>\n          {status === '0' ? 'Active' : 'Inactive'}\n        </Tag>\n      ),\n    },\n    {\n      title: 'Create Time',\n      dataIndex: 'createTime',\n      key: 'createTime',\n      width: 180,\n    },\n    {\n      title: 'Actions',\n      key: 'actions',\n      width: 300,\n      render: (_, record) => (\n        <Space size=\"small\">\n          <Button\n            type=\"link\"\n            icon={<EditOutlined />}\n            onClick={() => handleEdit(record)}\n          >\n            Edit\n          </Button>\n          <Button\n            type=\"link\"\n            icon={<UserOutlined />}\n            onClick={() => handleAssignPermissions(record)}\n          >\n            Permissions\n          </Button>\n          <Popconfirm\n            title=\"Delete Role\"\n            description=\"Are you sure you want to delete this role?\"\n            onConfirm={() => handleDelete(record.roleId)}\n            okText=\"Yes\"\n            cancelText=\"No\"\n          >\n            <Button type=\"link\" danger icon={<DeleteOutlined />}>\n              Delete\n            </Button>\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  return (\n    <div>\n      <Card title=\"Role Management\" style={{ marginBottom: 16 }}>\n        <Row gutter={[16, 16]} justify=\"space-between\" align=\"middle\">\n          <Col span={8}>\n            <Search\n              placeholder=\"Search by role name\"\n              onSearch={handleSearch}\n              style={{ width: '100%' }}\n            />\n          </Col>\n          <Col>\n            <Space>\n              <Button\n                type=\"primary\"\n                icon={<PlusOutlined />}\n                onClick={handleAdd}\n              >\n                Add Role\n              </Button>\n              <Button\n                icon={<ReloadOutlined />}\n                onClick={fetchRoles}\n              >\n                Refresh\n              </Button>\n            </Space>\n          </Col>\n        </Row>\n      </Card>\n\n      <Card>\n        <Table\n          columns={columns}\n          dataSource={roles}\n          rowKey=\"roleId\"\n          loading={loading}\n          pagination={{\n            ...pagination,\n            showSizeChanger: true,\n            showQuickJumper: true,\n            showTotal: (total, range) =>\n              `${range[0]}-${range[1]} of ${total} items`,\n          }}\n          onChange={handleTableChange}\n        />\n      </Card>\n\n      {/* Add/Edit Role Modal */}\n      <Modal\n        title={modalType === 'add' ? 'Add Role' : 'Edit Role'}\n        visible={modalVisible}\n        onOk={handleModalOk}\n        onCancel={() => setModalVisible(false)}\n        width={600}\n        okText={modalType === 'add' ? 'Create' : 'Update'}\n      >\n        <Form\n          form={form}\n          layout=\"vertical\"\n          initialValues={{\n            status: '0',\n            dataScope: '1',\n            menuCheckStrictly: true,\n            deptCheckStrictly: true,\n          }}\n        >\n          <Row gutter={16}>\n            <Col span={12}>\n              <Form.Item\n                name=\"roleName\"\n                label=\"Role Name\"\n                rules={[\n                  { required: true, message: 'Please input role name!' },\n                ]}\n              >\n                <Input placeholder=\"Enter role name\" />\n              </Form.Item>\n            </Col>\n            <Col span={12}>\n              <Form.Item\n                name=\"roleKey\"\n                label=\"Role Key\"\n                rules={[\n                  { required: true, message: 'Please input role key!' },\n                ]}\n              >\n                <Input placeholder=\"Enter role key\" />\n              </Form.Item>\n            </Col>\n          </Row>\n\n          <Row gutter={16}>\n            <Col span={12}>\n              <Form.Item\n                name=\"roleSort\"\n                label=\"Sort Order\"\n                rules={[\n                  { required: true, message: 'Please input sort order!' },\n                ]}\n              >\n                <Input type=\"number\" placeholder=\"Enter sort order\" />\n              </Form.Item>\n            </Col>\n            <Col span={12}>\n              <Form.Item\n                name=\"status\"\n                label=\"Status\"\n              >\n                <Select>\n                  <Option value=\"0\">Active</Option>\n                  <Option value=\"1\">Inactive</Option>\n                </Select>\n              </Form.Item>\n            </Col>\n          </Row>\n\n          <Row gutter={16}>\n            <Col span={24}>\n              <Form.Item\n                name=\"dataScope\"\n                label=\"Data Scope\"\n              >\n                <Select>\n                  <Option value=\"1\">All data</Option>\n                  <Option value=\"2\">Custom data</Option>\n                  <Option value=\"3\">Department data</Option>\n                  <Option value=\"4\">Department and sub-department data</Option>\n                  <Option value=\"5\">Personal data only</Option>\n                </Select>\n              </Form.Item>\n            </Col>\n          </Row>\n\n          <Row gutter={16}>\n            <Col span={24}>\n              <Form.Item\n                name=\"remark\"\n                label=\"Remark\"\n              >\n                <Input.TextArea rows={4} placeholder=\"Enter remark\" />\n              </Form.Item>\n            </Col>\n          </Row>\n        </Form>\n      </Modal>\n\n      {/* Permission Assignment Modal */}\n      <Modal\n        title={`Assign Permissions - ${selectedRole?.roleName}`}\n        visible={permissionModalVisible}\n        onOk={handlePermissionOk}\n        onCancel={() => setPermissionModalVisible(false)}\n        width={500}\n        okText=\"Save Permissions\"\n      >\n        <Tree\n          checkable\n          checkedKeys={selectedMenuKeys}\n          onCheck={setSelectedMenuKeys}\n          treeData={buildMenuTree(menus)}\n          height={400}\n        />\n      </Modal>\n    </div>\n  );\n};\n\nexport default RoleManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}